{"ast":null,"code":"var _jsxFileName = \"D:\\\\LaiOfferProjects\\\\starlink\\\\starlink\\\\src\\\\components\\\\Main.js\";\nimport React, { Component } from 'react';\nimport { Col, Row } from 'antd';\nimport SatSetting from \"./SatSetting\";\nimport SatelliteList from \"./SatelliteList\";\nimport { BASE_URL, SAT_API_KEY, NEARBY_SATELLITE, STARLINK_CATEGORY } from \"../constants\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Main extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      setting: {},\n      satInfo: {},\n      isLoadingList: false\n    };\n\n    this.showNearbySatellite = setting => {\n      // cb fn => get settings from the SatSetting\n      this.setState({\n        setting: setting\n      }); // fetch sat list from the server\n\n      this.fetchSatellite(setting);\n    };\n\n    this.fetchSatellite = setting => {\n      // 1. get sat info from the server\n      //  - setting / reg info\n      // 2. analyze the response\n      //  - case1: success => pass results to SatList\n      //  - case2: failure => inform the user\n      const {\n        latitude,\n        longitude,\n        elevation,\n        altitude\n      } = setting;\n      const url = `${BASE_URL}/${NEARBY_SATELLITE}/${latitude}/${longitude}/\n            ${elevation}/${altitude}/${STARLINK_CATEGORY}/&apiKey=${SAT_API_KEY}`;\n      this.setState({\n        isLoadingList: true\n      }); // no need to configure data info\n\n      axios.get(url).then(res => {\n        console.log(res);\n\n        if (res.status === 200) {\n          this.setState({\n            satInfo: res.data,\n            isLoadingList: false\n          });\n        }\n      }).catch(err => {\n        console.log(err.message);\n        this.setState({\n          isLoadingList: false\n        });\n      });\n    };\n\n    this.showMap = selected => {\n      console.log(selected);\n    };\n  }\n\n  render() {\n    const {\n      isLoadingList,\n      satInfo\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(Row, {\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        span: 8,\n        className: \"left-side\",\n        children: [/*#__PURE__*/_jsxDEV(SatSetting, {\n          onShow: this.showNearbySatellite\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 20\n        }, this), /*#__PURE__*/_jsxDEV(SatelliteList, {\n          satInfo: satInfo,\n          isLoad: isLoadingList,\n          onShowMap: this.showMap\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 20\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: 16,\n        className: \"right-side\",\n        children: \"right\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 16\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 12\n    }, this);\n  }\n\n}\n\nexport default Main;","map":{"version":3,"names":["React","Component","Col","Row","SatSetting","SatelliteList","BASE_URL","SAT_API_KEY","NEARBY_SATELLITE","STARLINK_CATEGORY","axios","Main","state","setting","satInfo","isLoadingList","showNearbySatellite","setState","fetchSatellite","latitude","longitude","elevation","altitude","url","get","then","res","console","log","status","data","catch","err","message","showMap","selected","render"],"sources":["D:/LaiOfferProjects/starlink/starlink/src/components/Main.js"],"sourcesContent":["import React, {Component} from 'react';\r\nimport { Col, Row } from 'antd';\r\nimport SatSetting from \"./SatSetting\";\r\nimport SatelliteList from \"./SatelliteList\";\r\nimport { BASE_URL, SAT_API_KEY, NEARBY_SATELLITE, STARLINK_CATEGORY } from \"../constants\";\r\nimport axios from \"axios\";\r\n\r\nclass Main extends Component {\r\n    state = {\r\n        setting: {},\r\n        satInfo: {},\r\n        isLoadingList: false,\r\n\r\n    }\r\n\r\n    showNearbySatellite = setting => {\r\n        // cb fn => get settings from the SatSetting\r\n        this.setState( {setting: setting});\r\n        // fetch sat list from the server\r\n        this.fetchSatellite(setting);\r\n    }\r\n\r\n    fetchSatellite = setting => {\r\n        // 1. get sat info from the server\r\n        //  - setting / reg info\r\n        // 2. analyze the response\r\n        //  - case1: success => pass results to SatList\r\n        //  - case2: failure => inform the user\r\n        const { latitude, longitude, elevation, altitude } = setting;\r\n        const url =\r\n            `${BASE_URL}/${NEARBY_SATELLITE}/${latitude}/${longitude}/\r\n            ${elevation}/${altitude}/${STARLINK_CATEGORY}/&apiKey=${SAT_API_KEY}`;\r\n\r\n        this.setState({isLoadingList: true})\r\n        // no need to configure data info\r\n        axios.get(url)\r\n            .then( res => {\r\n                console.log(res);\r\n                if (res.status === 200) {\r\n                    this.setState( {\r\n                        satInfo: res.data,\r\n                        isLoadingList: false\r\n                    })\r\n                }\r\n            })\r\n            .catch( err => {\r\n                console.log(err.message);\r\n                this.setState({isLoadingList: false})\r\n            })\r\n    }\r\n\r\n    showMap = (selected) => {\r\n        console.log(selected);\r\n    }\r\n\r\n    render() {\r\n        const { isLoadingList, satInfo } = this.state;\r\n\r\n        return (\r\n           <Row>\r\n               <Col span={8} className=\"left-side\">\r\n                   <SatSetting onShow={this.showNearbySatellite}/>\r\n                   <SatelliteList satInfo={satInfo}\r\n                                  isLoad={isLoadingList}\r\n                                  onShowMap={this.showMap}\r\n                   />\r\n               </Col>\r\n               <Col span={16} className=\"right-side\">\r\n                   right\r\n               </Col>\r\n           </Row>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Main;"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,SAASC,GAAT,EAAcC,GAAd,QAAyB,MAAzB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,SAASC,QAAT,EAAmBC,WAAnB,EAAgCC,gBAAhC,EAAkDC,iBAAlD,QAA2E,cAA3E;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;AAEA,MAAMC,IAAN,SAAmBV,SAAnB,CAA6B;EAAA;IAAA;IAAA,KACzBW,KADyB,GACjB;MACJC,OAAO,EAAE,EADL;MAEJC,OAAO,EAAE,EAFL;MAGJC,aAAa,EAAE;IAHX,CADiB;;IAAA,KAQzBC,mBARyB,GAQHH,OAAO,IAAI;MAC7B;MACA,KAAKI,QAAL,CAAe;QAACJ,OAAO,EAAEA;MAAV,CAAf,EAF6B,CAG7B;;MACA,KAAKK,cAAL,CAAoBL,OAApB;IACH,CAbwB;;IAAA,KAezBK,cAfyB,GAeRL,OAAO,IAAI;MACxB;MACA;MACA;MACA;MACA;MACA,MAAM;QAAEM,QAAF;QAAYC,SAAZ;QAAuBC,SAAvB;QAAkCC;MAAlC,IAA+CT,OAArD;MACA,MAAMU,GAAG,GACJ,GAAEjB,QAAS,IAAGE,gBAAiB,IAAGW,QAAS,IAAGC,SAAU;AACrE,cAAcC,SAAU,IAAGC,QAAS,IAAGb,iBAAkB,YAAWF,WAAY,EAFxE;MAIA,KAAKU,QAAL,CAAc;QAACF,aAAa,EAAE;MAAhB,CAAd,EAXwB,CAYxB;;MACAL,KAAK,CAACc,GAAN,CAAUD,GAAV,EACKE,IADL,CACWC,GAAG,IAAI;QACVC,OAAO,CAACC,GAAR,CAAYF,GAAZ;;QACA,IAAIA,GAAG,CAACG,MAAJ,KAAe,GAAnB,EAAwB;UACpB,KAAKZ,QAAL,CAAe;YACXH,OAAO,EAAEY,GAAG,CAACI,IADF;YAEXf,aAAa,EAAE;UAFJ,CAAf;QAIH;MACJ,CATL,EAUKgB,KAVL,CAUYC,GAAG,IAAI;QACXL,OAAO,CAACC,GAAR,CAAYI,GAAG,CAACC,OAAhB;QACA,KAAKhB,QAAL,CAAc;UAACF,aAAa,EAAE;QAAhB,CAAd;MACH,CAbL;IAcH,CA1CwB;;IAAA,KA4CzBmB,OA5CyB,GA4CdC,QAAD,IAAc;MACpBR,OAAO,CAACC,GAAR,CAAYO,QAAZ;IACH,CA9CwB;EAAA;;EAgDzBC,MAAM,GAAG;IACL,MAAM;MAAErB,aAAF;MAAiBD;IAAjB,IAA6B,KAAKF,KAAxC;IAEA,oBACG,QAAC,GAAD;MAAA,wBACI,QAAC,GAAD;QAAK,IAAI,EAAE,CAAX;QAAc,SAAS,EAAC,WAAxB;QAAA,wBACI,QAAC,UAAD;UAAY,MAAM,EAAE,KAAKI;QAAzB;UAAA;UAAA;UAAA;QAAA,QADJ,eAEI,QAAC,aAAD;UAAe,OAAO,EAAEF,OAAxB;UACe,MAAM,EAAEC,aADvB;UAEe,SAAS,EAAE,KAAKmB;QAF/B;UAAA;UAAA;UAAA;QAAA,QAFJ;MAAA;QAAA;QAAA;QAAA;MAAA,QADJ,eAQI,QAAC,GAAD;QAAK,IAAI,EAAE,EAAX;QAAe,SAAS,EAAC,YAAzB;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QARJ;IAAA;MAAA;MAAA;MAAA;IAAA,QADH;EAcH;;AAjEwB;;AAoE7B,eAAevB,IAAf"},"metadata":{},"sourceType":"module"}