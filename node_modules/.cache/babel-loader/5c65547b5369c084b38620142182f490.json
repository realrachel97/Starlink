{"ast":null,"code":"export default function (input, digits) {\n  if (!(0 <= (digits = +digits) && digits <= 20)) throw new Error(\"invalid digits\");\n\n  function quantizePoint(input) {\n    var n = input.length,\n        i = 2,\n        output = new Array(n);\n    output[0] = +input[0].toFixed(digits);\n    output[1] = +input[1].toFixed(digits);\n\n    while (i < n) output[i] = input[i], ++i;\n\n    return output;\n  }\n\n  function quantizePoints(input) {\n    return input.map(quantizePoint);\n  }\n\n  function quantizePointsNoDuplicates(input) {\n    var point0 = quantizePoint(input[0]);\n    var output = [point0];\n\n    for (var i = 1; i < input.length; i++) {\n      var point = quantizePoint(input[i]);\n\n      if (point.length > 2 || point[0] != point0[0] || point[1] != point0[1]) {\n        output.push(point);\n        point0 = point;\n      }\n    }\n\n    if (output.length === 1 && input.length > 1) {\n      output.push(quantizePoint(input[input.length - 1]));\n    }\n\n    return output;\n  }\n\n  function quantizePolygon(input) {\n    return input.map(quantizePointsNoDuplicates);\n  }\n\n  function quantizeGeometry(input) {\n    if (input == null) return input;\n    var output;\n\n    switch (input.type) {\n      case \"GeometryCollection\":\n        output = {\n          type: \"GeometryCollection\",\n          geometries: input.geometries.map(quantizeGeometry)\n        };\n        break;\n\n      case \"Point\":\n        output = {\n          type: \"Point\",\n          coordinates: quantizePoint(input.coordinates)\n        };\n        break;\n\n      case \"MultiPoint\":\n        output = {\n          type: input.type,\n          coordinates: quantizePoints(input.coordinates)\n        };\n        break;\n\n      case \"LineString\":\n        output = {\n          type: input.type,\n          coordinates: quantizePointsNoDuplicates(input.coordinates)\n        };\n        break;\n\n      case \"MultiLineString\":\n      case \"Polygon\":\n        output = {\n          type: input.type,\n          coordinates: quantizePolygon(input.coordinates)\n        };\n        break;\n\n      case \"MultiPolygon\":\n        output = {\n          type: \"MultiPolygon\",\n          coordinates: input.coordinates.map(quantizePolygon)\n        };\n        break;\n\n      default:\n        return input;\n    }\n\n    if (input.bbox != null) output.bbox = input.bbox;\n    return output;\n  }\n\n  function quantizeFeature(input) {\n    var output = {\n      type: \"Feature\",\n      properties: input.properties,\n      geometry: quantizeGeometry(input.geometry)\n    };\n    if (input.id != null) output.id = input.id;\n    if (input.bbox != null) output.bbox = input.bbox;\n    return output;\n  }\n\n  if (input != null) switch (input.type) {\n    case \"Feature\":\n      return quantizeFeature(input);\n\n    case \"FeatureCollection\":\n      {\n        var output = {\n          type: \"FeatureCollection\",\n          features: input.features.map(quantizeFeature)\n        };\n        if (input.bbox != null) output.bbox = input.bbox;\n        return output;\n      }\n\n    default:\n      return quantizeGeometry(input);\n  }\n  return input;\n}","map":{"version":3,"names":["input","digits","Error","quantizePoint","n","length","i","output","Array","toFixed","quantizePoints","map","quantizePointsNoDuplicates","point0","point","push","quantizePolygon","quantizeGeometry","type","geometries","coordinates","bbox","quantizeFeature","properties","geometry","id","features"],"sources":["D:/LaiOfferProjects/starlink/starlink/node_modules/d3-geo-projection/src/quantize.js"],"sourcesContent":["export default function(input, digits) {\n  if (!(0 <= (digits = +digits) && digits <= 20)) throw new Error(\"invalid digits\");\n\n  function quantizePoint(input) {\n    var n = input.length, i = 2, output = new Array(n);\n    output[0] = +input[0].toFixed(digits);\n    output[1] = +input[1].toFixed(digits);\n    while (i < n) output[i] = input[i], ++i;\n    return output;\n  }\n\n  function quantizePoints(input) {\n    return input.map(quantizePoint);\n  }\n\n  function quantizePointsNoDuplicates(input) {\n    var point0 = quantizePoint(input[0]);\n    var output = [point0];\n    for (var i = 1; i < input.length; i++) {\n      var point = quantizePoint(input[i]);\n      if (point.length > 2 || point[0] != point0[0] || point[1] != point0[1]) {\n        output.push(point);\n        point0 = point;\n      }\n    }\n    if (output.length === 1 && input.length > 1) {\n      output.push(quantizePoint(input[input.length - 1]));\n    }\n    return output;\n  }\n\n  function quantizePolygon(input) {\n    return input.map(quantizePointsNoDuplicates);\n  }\n\n  function quantizeGeometry(input) {\n    if (input == null) return input;\n    var output;\n    switch (input.type) {\n      case \"GeometryCollection\": output = {type: \"GeometryCollection\", geometries: input.geometries.map(quantizeGeometry)}; break;\n      case \"Point\": output = {type: \"Point\", coordinates: quantizePoint(input.coordinates)}; break;\n      case \"MultiPoint\": output = {type: input.type, coordinates: quantizePoints(input.coordinates)}; break;\n      case \"LineString\": output = {type: input.type, coordinates: quantizePointsNoDuplicates(input.coordinates)}; break;\n      case \"MultiLineString\": case \"Polygon\": output = {type: input.type, coordinates: quantizePolygon(input.coordinates)}; break;\n      case \"MultiPolygon\": output = {type: \"MultiPolygon\", coordinates: input.coordinates.map(quantizePolygon)}; break;\n      default: return input;\n    }\n    if (input.bbox != null) output.bbox = input.bbox;\n    return output;\n  }\n\n  function quantizeFeature(input) {\n    var output = {type: \"Feature\", properties: input.properties, geometry: quantizeGeometry(input.geometry)};\n    if (input.id != null) output.id = input.id;\n    if (input.bbox != null) output.bbox = input.bbox;\n    return output;\n  }\n\n  if (input != null) switch (input.type) {\n    case \"Feature\": return quantizeFeature(input);\n    case \"FeatureCollection\": {\n      var output = {type: \"FeatureCollection\", features: input.features.map(quantizeFeature)};\n      if (input.bbox != null) output.bbox = input.bbox;\n      return output;\n    }\n    default: return quantizeGeometry(input);\n  }\n\n  return input;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}