{"ast":null,"code":"import _toConsumableArray from\"D:/LaiOfferProjects/starlink/starlink/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"D:/LaiOfferProjects/starlink/starlink/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"D:/LaiOfferProjects/starlink/starlink/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/LaiOfferProjects/starlink/starlink/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"D:/LaiOfferProjects/starlink/starlink/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/LaiOfferProjects/starlink/starlink/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{Col,Row}from'antd';import SatSetting from\"./SatSetting\";import SatelliteList from\"./SatelliteList\";import{BASE_URL,SAT_API_KEY,NEARBY_SATELLITE,STARLINK_CATEGORY}from\"../constants\";import axios from\"axios\";import WorldMap from\"./WorldMap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Main=/*#__PURE__*/function(_Component){_inherits(Main,_Component);var _super=_createSuper(Main);function Main(){var _this;_classCallCheck(this,Main);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={setting:{},satInfo:{},isLoadingList:false,satList:[]};_this.showNearbySatellite=function(setting){// cb fn => get settings from the SatSetting\n_this.setState({setting:setting});// fetch sat list from the server\n_this.fetchSatellite(setting);};_this.fetchSatellite=function(setting){// 1. get sat info from the server\n//  - setting / reg info\n// 2. analyze the response\n//  - case1: success => pass results to SatList\n//  - case2: failure => inform the user\nvar latitude=setting.latitude,longitude=setting.longitude,elevation=setting.elevation,altitude=setting.altitude;var url=\"\".concat(BASE_URL,\"/\").concat(NEARBY_SATELLITE,\"/\").concat(latitude,\"/\").concat(longitude,\"/\\n            \").concat(elevation,\"/\").concat(altitude,\"/\").concat(STARLINK_CATEGORY,\"/&apiKey=\").concat(SAT_API_KEY);_this.setState({isLoadingList:true});// no need to configure data info\naxios.get(url).then(function(res){console.log(res);if(res.status===200){_this.setState({satInfo:res.data,isLoadingList:false});}}).catch(function(err){console.log(err.message);_this.setState({isLoadingList:false});});};_this.showMap=function(selected){console.log(selected);_this.setState(function(pre){return _objectSpread(_objectSpread({},pre),{},{satList:_toConsumableArray(selected)});});};return _this;}_createClass(Main,[{key:\"render\",value:function render(){var _this$state=this.state,isLoadingList=_this$state.isLoadingList,satInfo=_this$state.satInfo,satList=_this$state.satList,setting=_this$state.setting;return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{span:8,className:\"left-side\",children:[/*#__PURE__*/_jsx(SatSetting,{onShow:this.showNearbySatellite}),/*#__PURE__*/_jsx(SatelliteList,{satInfo:satInfo,isLoad:isLoadingList,onShowMap:this.showMap})]}),/*#__PURE__*/_jsx(Col,{span:16,className:\"right-side\",children:/*#__PURE__*/_jsx(WorldMap,{satData:satList,observerData:setting})})]});}}]);return Main;}(Component);export default Main;","map":{"version":3,"names":["React","Component","Col","Row","SatSetting","SatelliteList","BASE_URL","SAT_API_KEY","NEARBY_SATELLITE","STARLINK_CATEGORY","axios","WorldMap","Main","state","setting","satInfo","isLoadingList","satList","showNearbySatellite","setState","fetchSatellite","latitude","longitude","elevation","altitude","url","get","then","res","console","log","status","data","catch","err","message","showMap","selected","pre"],"sources":["D:/LaiOfferProjects/starlink/starlink/src/components/Main.js"],"sourcesContent":["import React, {Component} from 'react';\r\nimport { Col, Row } from 'antd';\r\nimport SatSetting from \"./SatSetting\";\r\nimport SatelliteList from \"./SatelliteList\";\r\nimport { BASE_URL, SAT_API_KEY, NEARBY_SATELLITE, STARLINK_CATEGORY } from \"../constants\";\r\nimport axios from \"axios\";\r\nimport WorldMap from \"./WorldMap\";\r\nclass Main extends Component {\r\n    state = {\r\n        setting: {},\r\n        satInfo: {},\r\n        isLoadingList: false,\r\n        satList: [],\r\n    }\r\n\r\n    showNearbySatellite = setting => {\r\n        // cb fn => get settings from the SatSetting\r\n        this.setState( {setting: setting});\r\n        // fetch sat list from the server\r\n        this.fetchSatellite(setting);\r\n    }\r\n\r\n    fetchSatellite = setting => {\r\n        // 1. get sat info from the server\r\n        //  - setting / reg info\r\n        // 2. analyze the response\r\n        //  - case1: success => pass results to SatList\r\n        //  - case2: failure => inform the user\r\n        const { latitude, longitude, elevation, altitude } = setting;\r\n        const url =\r\n            `${BASE_URL}/${NEARBY_SATELLITE}/${latitude}/${longitude}/\r\n            ${elevation}/${altitude}/${STARLINK_CATEGORY}/&apiKey=${SAT_API_KEY}`;\r\n\r\n        this.setState({isLoadingList: true})\r\n        // no need to configure data info\r\n        axios.get(url)\r\n            .then( res => {\r\n                console.log(res);\r\n                if (res.status === 200) {\r\n                    this.setState( {\r\n                        satInfo: res.data,\r\n                        isLoadingList: false\r\n                    })\r\n                }\r\n            })\r\n            .catch( err => {\r\n                console.log(err.message);\r\n                this.setState({isLoadingList: false})\r\n            })\r\n    }\r\n\r\n    showMap = (selected) => {\r\n        console.log(selected);\r\n        this.setState( pre => {\r\n            return {\r\n                ...pre,\r\n                satList: [...selected]\r\n            }\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const { isLoadingList, satInfo, satList, setting } = this.state;\r\n\r\n        return (\r\n           <Row>\r\n               <Col span={8} className=\"left-side\">\r\n                   <SatSetting onShow={this.showNearbySatellite}/>\r\n                   <SatelliteList satInfo={satInfo}\r\n                                  isLoad={isLoadingList}\r\n                                  onShowMap={this.showMap}\r\n                   />\r\n               </Col>\r\n               <Col span={16} className=\"right-side\">\r\n                   <WorldMap satData={satList} observerData={setting}/>\r\n               </Col>\r\n           </Row>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Main;"],"mappings":"ytBAAA,MAAOA,MAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,OAASC,GAAT,CAAcC,GAAd,KAAyB,MAAzB,CACA,MAAOC,WAAP,KAAuB,cAAvB,CACA,MAAOC,cAAP,KAA0B,iBAA1B,CACA,OAASC,QAAT,CAAmBC,WAAnB,CAAgCC,gBAAhC,CAAkDC,iBAAlD,KAA2E,cAA3E,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAOC,SAAP,KAAqB,YAArB,C,2FACMC,K,mTACFC,K,CAAQ,CACJC,OAAO,CAAE,EADL,CAEJC,OAAO,CAAE,EAFL,CAGJC,aAAa,CAAE,KAHX,CAIJC,OAAO,CAAE,EAJL,C,OAORC,mB,CAAsB,SAAAJ,OAAO,CAAI,CAC7B;AACA,MAAKK,QAAL,CAAe,CAACL,OAAO,CAAEA,OAAV,CAAf,EACA;AACA,MAAKM,cAAL,CAAoBN,OAApB,EACH,C,OAEDM,c,CAAiB,SAAAN,OAAO,CAAI,CACxB;AACA;AACA;AACA;AACA;AACA,GAAQO,SAAR,CAAqDP,OAArD,CAAQO,QAAR,CAAkBC,SAAlB,CAAqDR,OAArD,CAAkBQ,SAAlB,CAA6BC,SAA7B,CAAqDT,OAArD,CAA6BS,SAA7B,CAAwCC,QAAxC,CAAqDV,OAArD,CAAwCU,QAAxC,CACA,GAAMC,IAAG,WACFnB,QADE,aACUE,gBADV,aAC8Ba,QAD9B,aAC0CC,SAD1C,2BAEHC,SAFG,aAEUC,QAFV,aAEsBf,iBAFtB,qBAEmDF,WAFnD,CAAT,CAIA,MAAKY,QAAL,CAAc,CAACH,aAAa,CAAE,IAAhB,CAAd,EACA;AACAN,KAAK,CAACgB,GAAN,CAAUD,GAAV,EACKE,IADL,CACW,SAAAC,GAAG,CAAI,CACVC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACA,GAAIA,GAAG,CAACG,MAAJ,GAAe,GAAnB,CAAwB,CACpB,MAAKZ,QAAL,CAAe,CACXJ,OAAO,CAAEa,GAAG,CAACI,IADF,CAEXhB,aAAa,CAAE,KAFJ,CAAf,EAIH,CACJ,CATL,EAUKiB,KAVL,CAUY,SAAAC,GAAG,CAAI,CACXL,OAAO,CAACC,GAAR,CAAYI,GAAG,CAACC,OAAhB,EACA,MAAKhB,QAAL,CAAc,CAACH,aAAa,CAAE,KAAhB,CAAd,EACH,CAbL,EAcH,C,OAEDoB,O,CAAU,SAACC,QAAD,CAAc,CACpBR,OAAO,CAACC,GAAR,CAAYO,QAAZ,EACA,MAAKlB,QAAL,CAAe,SAAAmB,GAAG,CAAI,CAClB,sCACOA,GADP,MAEIrB,OAAO,oBAAMoB,QAAN,CAFX,GAIH,CALD,EAMH,C,sDAED,iBAAS,CACL,gBAAqD,KAAKxB,KAA1D,CAAQG,aAAR,aAAQA,aAAR,CAAuBD,OAAvB,aAAuBA,OAAvB,CAAgCE,OAAhC,aAAgCA,OAAhC,CAAyCH,OAAzC,aAAyCA,OAAzC,CAEA,mBACG,MAAC,GAAD,yBACI,MAAC,GAAD,EAAK,IAAI,CAAE,CAAX,CAAc,SAAS,CAAC,WAAxB,wBACI,KAAC,UAAD,EAAY,MAAM,CAAE,KAAKI,mBAAzB,EADJ,cAEI,KAAC,aAAD,EAAe,OAAO,CAAEH,OAAxB,CACe,MAAM,CAAEC,aADvB,CAEe,SAAS,CAAE,KAAKoB,OAF/B,EAFJ,GADJ,cAQI,KAAC,GAAD,EAAK,IAAI,CAAE,EAAX,CAAe,SAAS,CAAC,YAAzB,uBACI,KAAC,QAAD,EAAU,OAAO,CAAEnB,OAAnB,CAA4B,YAAY,CAAEH,OAA1C,EADJ,EARJ,GADH,CAcH,C,kBAvEcb,S,EA0EnB,cAAeW,KAAf"},"metadata":{},"sourceType":"module"}